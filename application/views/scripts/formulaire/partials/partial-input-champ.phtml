<?php switch ($this->champ['ID_TYPECHAMP']) {
    // Texte
    //<!-- FIXME Vérifier si les paramètres sont bien passés, et passer l ID_VALEUR : A modifier dans Service_Descriptif et Service_Valeur -->
    //<!-- FIXME A faire pour tous les champs -->
    case 1: ?>
        <input
            type='text'
            name='<?= isset($this->idxTableau) ? ('valeur-' . $this->idxTableau . '-'.$this->idParent .'-'. $this->champ['ID_CHAMP']) .'-'.(!empty($this->champ["VALEUR"]['ID_VALEUR']) ? $this->champ["VALEUR"]['ID_VALEUR'] : 'NULL')  : 'champ-'.htmlspecialchars($this->champ["ID_CHAMP"])?>'
            value='<?= htmlspecialchars($this->champ['VALEUR'], ENT_QUOTES) ?>'
            <?= $this->canWrite ? '': 'disabled'?>
        >
    <?php break;
    // Texte long
    case 2: ?>
        <textarea name='<?= isset($this->idxTableau) ? ('valeur-' . $this->idxTableau . '-'.$this->idParent .'-'. $this->champ['ID_CHAMP']) .'-'.(!empty($this->champ["VALEUR"]['ID_VALEUR']) ? $this->champ["VALEUR"]['ID_VALEUR'] : 'NULL') : 'champ-'.htmlspecialchars($this->champ["ID_CHAMP"])?>' <?= $this->canWrite ? '': 'disabled'?>><?= htmlspecialchars($this->champ['VALEUR'], ENT_QUOTES) ?></textarea>
    <?php break;
    // Liste
    case 3: ?>
        <select name='<?= isset($this->idxTableau) ? ('valeur-' . $this->idxTableau . '-'.$this->idParent .'-'. $this->champ['ID_CHAMP']) .'-'.(!empty($this->champ["VALEUR"]['ID_VALEUR']) ? $this->champ["VALEUR"]['ID_VALEUR'] : 'NULL')  : 'champ-'.htmlspecialchars($this->champ["ID_CHAMP"])?>' <?= $this->canWrite ? '': 'disabled'?>>
            <option selected value>Sélectionnez un élément</option>
            <?php foreach($this->champsvaleurliste[$this->champ['ID_CHAMP']] as $champvaleurliste): ?>
                <option
                    value="<?= htmlspecialchars($champvaleurliste['VALEUR'], ENT_QUOTES) ?>"
                    <?= $champvaleurliste['VALEUR'] === $this->champ['VALEUR'] ? 'selected' : '' ?>
                >
                    <?= $champvaleurliste['VALEUR'] ?>
                </option>
            <?php endforeach ?>
        </select>
    <?php break;
    // Nombre
    case 4: ?>
        <input type='number' name='<?= isset($this->idxTableau) ? ('valeur-' . $this->idxTableau . '-'.$this->idParent .'-'. $this->champ['ID_CHAMP']) .'-'.(!empty($this->champ["VALEUR"]['ID_VALEUR']) ? $this->champ["VALEUR"]['ID_VALEUR'] : 'NULL')  : 'champ-'.htmlspecialchars($this->champ["ID_CHAMP"])?>' <?= $this->canWrite ? '': 'disabled'?> min='0' value='<?= $this->champ['VALEUR'] ?>'>
    <?php break;
    // Case à cocher
    case 5: ?>
        <input
            type="hidden"
            name='<?= isset($this->idxTableau) ? ('valeur-' . $this->idxTableau . '-'.$this->idParent .'-'. $this->champ['ID_CHAMP']) .'-'.(!empty($this->champ["VALEUR"]['ID_VALEUR']) ? $this->champ["VALEUR"]['ID_VALEUR'] : 'NULL')  : 'champ-'.htmlspecialchars($this->champ["ID_CHAMP"])?>'
            value="0"
            <?= $this->canWrite ? '': 'disabled'?>
        >
        <input
            type="checkbox"
            name='<?= isset($this->idxTableau) ? ('valeur-' . $this->idxTableau . '-'.$this->idParent .'-'. $this->champ['ID_CHAMP']) .'-'.(!empty($this->champ["VALEUR"]['ID_VALEUR']) ? $this->champ["VALEUR"]['ID_VALEUR'] : 'NULL')  : 'champ-'.htmlspecialchars($this->champ["ID_CHAMP"])?>'
            value="1"
            <?= $this->canWrite ? '': 'disabled'?>
            <?= $this->champ['VALEUR'] ? 'checked' : '' ?>
        >
    <?php break;
    // Parent
    case 6:?>
        <!-- TODO Idéalement à déporter dans un partial -->
        <?php if(intval(empty($this->champ['tableau']) ? 0 : $this->champ['tableau']) === 1) : ?>
            <?php if(isset($this->canWrite) ? $this->canWrite : false) :?>
                <!-- [button type='button'] pour desactiver le submit auto suite a un clic de bouton -->
                <button type='button' class='btn addRow btnAddRowTable' idparent=<?= $this->champ['ID_CHAMP']?> >Ajouter ligne</button>
            <?php endif ?>
            <table class='table table-striped '>
                <thead>
                    <tr>
                    <?php if(isset($this->canWrite) ? $this->canWrite : true) :?>
                            <th>#</th>
                    <?php endif ?>
                        <?php foreach($this->champ['FILS'] as $champsFils) :?>
                            <?php if(!empty($champsFils['NOM'])) : ?>
                                <th>
                                    <?= $champsFils['NOM'] ?>
                                </th>
                            <?php endif ?>
                        <?php endforeach ?>
                        <?php if(isset($this->canWrite) ? $this->canWrite : true) :?>
                            <th>Supprimer</th>
                        <?php endif ?>
                    </tr>
                </thead>
                <tbody id= <?= 'tbody-'.$this->champ['ID_CHAMP'] ?> class='grp'>

                <!--
                <tr class='ligneTableau hidden'>
                    <?php if(isset($this->canWrite) ? $this->canWrite : true) :?>
                        <td class='tdMove'>
                            <i class="icon-move"></i>
                        </td>
                    <?php endif ?>
                    <?php foreach($this->champ['FILS'] as $champsFils) :?>
                            <td>
                                <?= $this->partial('formulaire/partials/partial-input-champ.phtml', [
                                    'champ' => $champsFils,
                                    'canWrite' => isset($this->canWrite) ? $this->canWrite : false,
                                    'idxTableau' => 0,
                                    'idParent' => $this->champ['ID_CHAMP']
                                    ]);
                                ?>
                            </td>
                    <?php endforeach ?>
                    <td>
                        <?php if(isset($this->canWrite) ? $this->canWrite : false) :?>
                            <button type='button' class='deleteRow btn btn-danger'><i class='icon-trash'></i></button>
                        <?php endif?>
                    </td>
                </tr>
                -->
                <!-- FIXME Utiliser $this->champ['VALEUR'] : Nécessite peut-être d'ajouter des choses côté back -->
                    <?= $this->partial('formulaire/partials/tableau/partial-tableau.phtml', [
                            'colonnesChamp' => $this->champ['FILS'],
                            'canWrite' => isset($this->canWrite) ? $this->canWrite : false
                        ]);
                    ?>
                </tbody>
            </table>
        <?php else : ?>
            <div class="tableInput">
                <?php foreach ($this->champ["FILS"] as $champsFils): ?>
                    <div class="colTableInput">
                        <th><?= $champsFils['NOM'] ?></th>
                        <?= $this->partial('formulaire/partials/partial-input-champ.phtml', [
                            'champ' => $champsFils,
                            'champsvaleurliste' => $this->champsvaleurliste,
                            'canWrite' => isset($this->canWrite) ? $this->canWrite : false
                            ]);
                        ?>
                    </div>
                <?php endforeach;?>
            </div>
        <?php endif?>
    <?php break;
    default:
        break;
} ?>
